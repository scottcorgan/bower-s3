/*
xortable - v0.3.3 - 4/17/2013
jQuery plugin for sortable horiztonal lists. Fast, light-weight (less than 1kb gzipped), and horizontal.
Copyright (c) 2013 ; Licensed  
*/
(function(t,e){"use strict";function i(e,i){this.element=e,this.$element=t(this.element),this.$dragged={},this.draggedIdx=0,this.$draggedPH={},this.dragOffset=0,this.prevX=0,this.dragDirection=null,this._triggerPoints=[],this.options=t.extend({},r,i),this._defaults=r,this._name=s,this.init()}var s="xortable",r={dragStart:function(){},dragEnd:function(){}},n=t("body"),d=t(e);i.prototype={init:function(){this._bindActions(),this.$element.on("DOMNodeInserted",t.proxy(this._bindActions,this))},_bindActions:function(){this.$children&&this.$children.length&&this.$children.off("mousedown",this._prepEvetns),this.$children=this.$element.children(),this.setSelectable(!1),this.$element.addClass("xortable-parent"),this.$children.addClass("xortable-child"),this.$children.on("mousedown",t.proxy(this._prepEvetns,this))},_prepEvetns:function(e){var i=t(e.currentTarget),s=this;i.one("mousemove",function(t){s._childMouseDownHandler(t)}),i.one("mouseup",function(){i.off("mousemove")})},_childMouseDownHandler:function(e){var i=t(e.currentTarget);this.options.dragStart(i),this._resetTriggerPoints(),this.$dragged=i,this.$draggedPH=this.$dragged.clone(),this.draggedIdx=this.$children.index(this.$dragged),this.dragOffset=e.pageX-e.currentTarget.offsetLeft,this.$dragged.css({visibility:"hidden"}).addClass("xortable-dragged"),this.$draggedPH.appendTo(this.$element).attr("data-draggable-item",!0).addClass("xortable-dragged-placeholder").css({position:"absolute",left:e.pageX-this.dragOffset}),n.on("mousemove",t.proxy(this._dragTab,this)),d.one("mouseup",t.proxy(function(){i.mouseup(),this._cleanup(),this.options.dragEnd(i)},this))},_resetTriggerPoints:function(){var e=this;this._triggerPoints=[],this.$children.each(function(i){var s=t(this);if(!s.attr("data-draggable-item")){var r=s.position(),n=r.left,d=r.left+s.width();e._triggerPoints[i]={left:n,right:d}}})},_cleanup:function(){this.$dragged.removeClass("xortable-dragged"),this.$draggedPH.remove(),this.$dragged.css({visibility:"visible"}),this.$dragged=null,this.$draggedPH=null,this._triggerPoints=[],n.off("mousemove",this._dragTab)},_dragTab:function(t){var e=t.pageX-this.dragOffset,i=e+this.$draggedPH.width()/2;this.setDragDirection(e,this.prevX),this._rearrange(i,t.pageX),this.prevX=e,this.$draggedPH.css("left",e)},_rearrange:function(t){var e,i=!1,s=0,r=0;"right"===this.dragDirection&&this.draggedIdx<this._triggerPoints.length-1&&(r=this.draggedIdx+1,s=this._triggerPoints[r].left,t>s&&(e=this.$children.get(r),this.$dragged=this.$dragged.insertAfter(e),this.draggedIdx=r,i=!0)),this.draggedIdx>0&&(r=this.draggedIdx-1,s=this._triggerPoints[r].right,s>t&&(e=this.$children.get(r),this.$dragged=this.$dragged.insertBefore(e),this.draggedIdx=r,i=!0)),i&&(this.$children=this.$element.find("li:not([data-draggable-item])"),i=!1)},setDragDirection:function(t,e){this.dragDirection=t>=e?"right":"left"},setSelectable:function(t){return t?(this.$element.css("user-select","all").off("selectstart",!1),undefined):(this.$element.css("user-select","none").on("selectstart",!1),undefined)}},t.fn[s]=function(e){return this.each(function(){t.data(this,"plugin_"+s)||t.data(this,"plugin_"+s,new i(this,e))})}})(jQuery,document);